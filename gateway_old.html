<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="../../favicon.ico">

<title>Things Network Dunedin</title>

<!-- Bootstrap core CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet">

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<link href="css/ie10-viewport-bug-workaround.css" rel="stylesheet">

<!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
<!--[if lt IE 9]><script src="../../js/ie8-responsive-file-warning.js"></script><![endif]-->
<script src="js/ie-emulation-modes-warning.js"></script>

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Custom styles for this template -->
<!-- <link href="css/TNWD-Style.css" rel="stylesheet"> -->
<link href="css/carousel.css" rel="stylesheet">
<link href="css/docs.min.css" rel="stylesheet">
<!-- Include Footer Style Css -->
<link rel="stylesheet" href="css/footer.css">
</head>
<!-- NAVBAR
================================================== -->
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container">
<!-- Brand and toggle get grouped for better mobile display -->
<div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="index.html">Things Network Dunedin</a>
</div>
<!-- Collect the nav links, forms, and other content for toggling -->
<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
<ul class="nav navbar-nav navbar-right">
<li>
<a href="about.html">About</a>
</li>
<li>
<a href="blogmain.html">Blog</a>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a href="gateway.html">Gateway</a>
</li>
<li>
<a href="node.html">Node</a>
</li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Other<b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a href="faq.html">FAQ</a>
</li>
</ul>
</li>
<li>
<a href="contact.html">Contact</a>
</li>
</ul>
</div>
<!-- /.navbar-collapse -->
</div>
<!-- /.container -->
</nav>

<!-- Marketing messaging and featurettes
================================================== -->
<!-- Wrap the rest of the page in another container to center all the content. -->

<div class="container marketing">

<!-- START THE FEATURETTES -->

<hr class="featurette-divider">

<div class="row featurette">
<div class="col-md-7">
<h2 class="featurette-heading">Creating <span class="text-muted">a LoRaWAN Gateway</span></h2>
<p class="lead">There are many options you can pursue when choosing the hardware to use for LoRaWAN applications. You can choose to simply buy the pre-made TTN Gateway directly from TTN themselves, or you can choose a cheaper, more DIY route.</p>
<p class="lead">For our LoRaWAN Gateway we chose to build and configure our own. This quick how-to describes how our gateway was created, from choosing the correct parts to installing software.</p>
</div>
<!-- <div class="col-md-5">
<img class="featurette-image img-responsive center-block" data-src="holder.js/500x500/auto" alt="Generic placeholder image">
</div> -->
</div>

<hr class="featurette-divider">

<div class="row featurette">
<div class="col-md-7 col-md-push-5">
<h2 class="featurette-heading">Choosing <span class="text-muted">the Correct Hardware</span></h2>
<p class="lead">When building the gateway for yourself you need to make sure the hardware you choose is compatible. There are multiple options, but we will only focus on the option that we pursued.</p>
<p class="lead">We need the following hardware before we can get started:</p>
<ul class="lead">
<li>Raspberry Pi – A Raspberry Pi is used as the main controller for the gateway. It will hold and run our software, and will be connected to the rest of our devices. Any Raspberry Pi model will do, but faster is generally better.</li>
<li>Multitech mCard-LoRa – This is the main sender and receiver of LoRaWAN packets, without this hardware the gateway will not be able to talk to our nodes. This device comes with an antenna, and is PCIe compatible.</li>
<li>USB to Mini-PCIe Convertor – This adaptor is necessary to connect the mCard to the Raspberry Pi, as the Pi does not have a Mini-PCIe slot itself.</li>
</ul>
</div>
<!-- <div class="col-md-5 col-md-pull-7">
<img class="featurette-image img-responsive center-block" data-src="holder.js/500x500/auto" alt="Generic placeholder image">
</div> -->
</div>

<hr class="featurette-divider">

<div class="row featurette">
<div class="col-md-7">
<h2 class="featurette-heading">Hardware <span class="text-muted">Modifications</span></h2>
<p class="lead">Something you may need to do is a small hardware modification on the Mini-PCIe adaptor. We didn’t end up having to do it, as our board worked anyway. However, if you have completely set up the gateway and it still doesn’t seem to be working, you can try this optional step.</p>
<p class="lead">Sometimes it may be necessary to provide extra power to a couple of the pins on the adaptor. To do this we need to solder a wire from the 5V pin on the USB connector to pins 23 and 25 of the PCIe connector. The following picture of the completed modification:</p>
<p class="lead">That is all you need to do to modify the hardware.</p>
</div>
<div class="col-md-5">
<img class="featurette-image img-responsive center-block" src="images/gateway.jpg" alt="Gateway">
</div>
<!-- <div class="col-md-5">
<img class="featurette-image img-responsive center-block" data-src="holder.js/500x500/auto" alt="Generic placeholder image">
</div> -->
</div>

<hr class="featurette-divider">

<div class="row featurette">
<div class="col-md-7 col-md-push-5">
<h2 class="featurette-heading">Installing and <span class="text-muted">Running Software</span></h2>
<p class="lead">To be able to install the gateway software on the Raspberry Pi, the Pi itself needs to be set up. We used Raspbian, a version of Debian designed to run on a Raspberry Pi’s architecture. We won’t cover how to install Raspbian, as there is already a lot of documentation out there for it and it can be installed incredibly quickly and easily through NOOBS for Raspberry Pi.</p>
<p class="lead">Once you have a working version of Raspbian on your Raspberry Pi, you need to get the gateway software. There are multiple parts of software we need, so follow the next instructions carefully:</p>
<figure class="highlight">
<pre><code>sudo apt-get update
sudo apt-get install git --assume-yes
sudo apt-get install libftdi-dev --assume-yes
cd ~
wget http://libmpsse.googlecode.com/files/libmpsse-1.3.tar.gz
tar zxvf libmpsse-1.3.tar.gz
cd libmpsse-1.3/src
./configure --prefix=/usr --disable-python
make
sudo make install
cd /etc/udev/rules.d
sudo wget https://raw.githubusercontent.com/mirakonta/lora_gateway/master/libloragw/99-libftdi.rules
sudo udevadm control --reload-rules
sudo udevadm trigger
sudo adduser pi plugdev
cd ~</code></pre>
</figure>
</div>
<!-- <div class="col-md-5 col-md-pull-7">
<img class="featurette-image img-responsive center-block" data-src="holder.js/500x500/auto" alt="Generic placeholder image">
</div> -->
</div>

<hr class="featurette-divider">

<div class="row featurette">
<div class="col-md-7">
<p class="lead">Now we have our dependencies we can download and compile the LoRaWAN Gateway Software:</p>
<figure class="highlight">
<pre><code>mkdir ~/lora
cd ~/lora
mkdir exec
git clone https://github.com/mirakonta/lora_gateway.git
git clone https://github.com/mirakonta/packet_forwarder.git
cd ~/lora/lora_gateway
make clean all
cd ~/lora/packet_forwarder
make clean all
cp ~/lora/packet_forwarder/basic_pkt_fwd/basic_pkt_fwd ~/lora/exec/
cp ~/lora/packet_forwarder/basic_pkt_fwd/*.json ~/lora/exec/
cd ~/lora/exec</code></pre>
</figure>
<p class="lead">The gateway code is now compiled and ready to go. To run the gateway, simply run the command:</p>
<figure class="highlight">
<pre><code>sudo ./basic_pkt_fwd</code></pre>
</figure>
</div>
</div>
<hr class="featurette-divider">
<!-- /END THE FEATURETTES -->
</div><!-- /.container -->

<!-- Footer Section -->
<footer class="footer-distributed">
<div class="footer-left">
<a class="footer-brand" href="./"><img src="images/OP_logo_H_RGB.jpg" alt="Site Logo"></a>
<p class="footer-company-name">Company Name &copy; 2015</p>
</div>
<div class="footer-center">
<div>
<i class="fa fa-map-marker"></i>
<p><span>Private Bag 1910</span> Dunedin, New Zealand 9054</p>
</div>
<div>
<i class="fa fa-phone"></i>
<p>International </p><p>+64 3 477 3014</p>
</div>
<div>
<i class="fa fa-phone"></i>
<p>New Zealand </p><p>0800 762 786</p>
</div>
<div>
<i class="fa fa-envelope"></i>
<p>Email </p><p><a href="mailto:support@company.com">info@op.ac.nz</a></p>
</div>
</div>
<div class="footer-right">
<p class="footer-company-about">
<span>About the company</span>
This will be where we tell people about the company
</p>
<div class="footer-icons">
<a href="#"><i class="fa fa-facebook"></i></a>
<a href="#"><i class="fa fa-twitter"></i></a>
<a href="#"><i class="fa fa-linkedin"></i></a>
<a href="#"><i class="fa fa-github"></i></a>
</div>
</div>
</footer>
<!-- /.Footer Section -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../js/vendor/jquery.min.js"><\/script>')</script>
<script src="js/bootstrap.min.js"></script>
<!-- Just to make our placeholder images work. Don't actually copy the next line! -->
<script src="js/vendor/holder.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>
